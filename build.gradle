/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our Samples at https://docs.gradle.org/8.13/samples
 * This project uses @Incubating APIs which are subject to change.
 */

plugins {
    id 'java-platform'
    id 'maven-publish'
}

javaPlatform {
    allowDependencies()
}
group = 'com.nice.wfm'
version = '8.2.0.0-SNAPSHOT' // version of the BOM itself

// Define versions for dependencies
dependencies {
    constraints {
        api "${group}:common.commons:${appVersion}"
        api "${group}:common.domain:${appVersion}"
        api "${group}:kernel.kernel:${appVersion}"
        api "${group}:kernel.commons:${appVersion}"

        api "${group}:swxiface.swxiface:${swxifaceVersion}"
        api "${group}:swxiface.commons:${swxifaceVersion}"


        api "${group}:common.event.common:${appVersion}"
        api "${group}:common.event.listener.api:${appVersion}"
        api "${group}:common.rtu.common:${appVersion}"
        api "${group}:common.rtu.listener:${appVersion}"
        api "${group}:common.seatlimits.domain:${appVersion}"
        api "${group}:common.services.api:${appVersion}"
        api "${group}:common.services.generators.api:${appVersion}"
        api "${group}:common.ui.commons:${appVersion}"

        api "${group}:kernel.domain:${appVersion}"
        api "${group}:kernel.schema:${appVersion}"
        api "${group}:kernel.monitor:${appVersion}"
        api "${group}:kernel.bootstrap:${appVersion}"
        api "${group}:kernel.api:${appVersion}"
        // TEST JAR (classifier)
//        api group: group,
//                name: "kernel.commons",
//                version: appVersion,
//                type: "test-jar",
//                scope: "test"
//        api("${group}:kernel.commons:${appVersion}:tests")
    }
}

publishing {
    publications {
        mavenJava(MavenPublication) {
            from components.javaPlatform
        }
    }
    repositories {
        maven {
            url project.findProperty("nexusRepoUrl") ?: ""
            allowInsecureProtocol = true
            credentials {
                username = System.getenv("REPO_USER")
                password = System.getenv("REPO_PASSWORD")
            }
        }
    }
}
tasks.named('publishToMavenLocal') {
    System.setProperty('maven.repo.local', "${System.getProperty('user.home')}/.gradle/caches/modules-2/files-2.1")
}

